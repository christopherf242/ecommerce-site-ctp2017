/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 6);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"express\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImV4cHJlc3NcIj9kMmQyIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJleHByZXNzXCJcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!*************************!*\
  !*** ./models/index.js ***!
  \*************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(__filename, __dirname) {\n\nvar fs = __webpack_require__(/*! fs */ 8);\nvar path = __webpack_require__(/*! path */ 3);\nvar Sequelize = __webpack_require__(/*! sequelize */ 4);\nvar basename = path.basename(__filename);\nvar env = process.env.NODE_ENV || 'development';\nvar config = __webpack_require__(/*! ./models/../config/config.json */ 9)[env];\nvar db = {};\n\nconsole.log(\"+++++\", config);\n\nif (config.use_env_variable) {\n  var sequelize = new Sequelize(process.env[config.use_env_variable]);\n} else {\n  var sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\nfs.readdirSync(__dirname).filter(function (file) {\n  return file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js';\n}).forEach(function (file) {\n  var model = sequelize['import'](path.join(__dirname, file));\n  db[model.name] = model;\n});\n\nObject.keys(db).forEach(function (modelName) {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n/* WEBPACK VAR INJECTION */}.call(exports, \"/index.js\", \"/\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9tb2RlbHMvaW5kZXguanM/MThjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZnMgICAgICAgID0gcmVxdWlyZSgnZnMnKTtcbnZhciBwYXRoICAgICAgPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgU2VxdWVsaXplID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG52YXIgYmFzZW5hbWUgID0gcGF0aC5iYXNlbmFtZShfX2ZpbGVuYW1lKTtcbnZhciBlbnYgICAgICAgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnO1xudmFyIGNvbmZpZyAgICA9IHJlcXVpcmUoX19kaXJuYW1lICsgJy8uLi9jb25maWcvY29uZmlnLmpzb24nKVtlbnZdO1xudmFyIGRiICAgICAgICA9IHt9O1xuXG5jb25zb2xlLmxvZyhcIisrKysrXCIsIGNvbmZpZyk7XG5cbmlmIChjb25maWcudXNlX2Vudl92YXJpYWJsZSkge1xuICB2YXIgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShwcm9jZXNzLmVudltjb25maWcudXNlX2Vudl92YXJpYWJsZV0pO1xufSBlbHNlIHtcbiAgdmFyIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLmRhdGFiYXNlLCBjb25maWcudXNlcm5hbWUsIGNvbmZpZy5wYXNzd29yZCwgY29uZmlnKTtcbn1cblxuZnNcbiAgLnJlYWRkaXJTeW5jKF9fZGlybmFtZSlcbiAgLmZpbHRlcihmaWxlID0+IHtcbiAgICByZXR1cm4gKGZpbGUuaW5kZXhPZignLicpICE9PSAwKSAmJiAoZmlsZSAhPT0gYmFzZW5hbWUpICYmIChmaWxlLnNsaWNlKC0zKSA9PT0gJy5qcycpO1xuICB9KVxuICAuZm9yRWFjaChmaWxlID0+IHtcbiAgICB2YXIgbW9kZWwgPSBzZXF1ZWxpemVbJ2ltcG9ydCddKHBhdGguam9pbihfX2Rpcm5hbWUsIGZpbGUpKTtcbiAgICBkYlttb2RlbC5uYW1lXSA9IG1vZGVsO1xuICB9KTtcblxuT2JqZWN0LmtleXMoZGIpLmZvckVhY2gobW9kZWxOYW1lID0+IHtcbiAgaWYgKGRiW21vZGVsTmFtZV0uYXNzb2NpYXRlKSB7XG4gICAgZGJbbW9kZWxOYW1lXS5hc3NvY2lhdGUoZGIpO1xuICB9XG59KTtcblxuZGIuc2VxdWVsaXplID0gc2VxdWVsaXplO1xuZGIuU2VxdWVsaXplID0gU2VxdWVsaXplO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRiO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG1vZGVscy9pbmRleC5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!******************************!*\
  !*** ./controllers/utils.js ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar mustBeLoggedIn = function mustBeLoggedIn(req, res, next) {\n  if (!req.user) {\n    var err = new Error('You must be logged in');\n    err.status = 401;\n    throw err;\n  }\n  next();\n};\n\nvar selfOnly = function selfOnly(action) {\n  return function (req, res, next) {\n    if (req.params.uid !== req.user.id) {\n      var err = new Error('You can only ' + action + ' yourself.');\n      err.status = 403;\n      throw err;\n    }\n    next();\n  };\n};\n\n// Feel free to add more filters here (suggested: something that keeps out non-admins)\nmodule.exports = { mustBeLoggedIn: mustBeLoggedIn, selfOnly: selfOnly };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb250cm9sbGVycy91dGlscy5qcz84Njc2Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG11c3RCZUxvZ2dlZEluID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGlmICghcmVxLnVzZXIpIHtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ1lvdSBtdXN0IGJlIGxvZ2dlZCBpbicpXG4gICAgZXJyLnN0YXR1cyA9IDQwMVxuICAgIHRocm93IGVyclxuICB9XG4gIG5leHQoKVxufVxuXG5jb25zdCBzZWxmT25seSA9IGFjdGlvbiA9PiAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgaWYgKHJlcS5wYXJhbXMudWlkICE9PSByZXEudXNlci5pZCkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgWW91IGNhbiBvbmx5ICR7YWN0aW9ufSB5b3Vyc2VsZi5gKVxuICAgIGVyci5zdGF0dXMgPSA0MDNcbiAgICB0aHJvdyBlcnJcbiAgfVxuICBuZXh0KClcbn1cblxuLy8gRmVlbCBmcmVlIHRvIGFkZCBtb3JlIGZpbHRlcnMgaGVyZSAoc3VnZ2VzdGVkOiBzb21ldGhpbmcgdGhhdCBrZWVwcyBvdXQgbm9uLWFkbWlucylcbm1vZHVsZS5leHBvcnRzID0geyBtdXN0QmVMb2dnZWRJbiwgc2VsZk9ubHkgfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb250cm9sbGVycy91dGlscy5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBUUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"path\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInBhdGhcIj81YjJhIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhdGhcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJwYXRoXCJcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!****************************!*\
  !*** external "sequelize" ***!
  \****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"sequelize\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInNlcXVlbGl6ZVwiPzVjZDUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwic2VxdWVsaXplXCJcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/*!***************************!*\
  !*** external "passport" ***!
  \***************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"passport\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInBhc3Nwb3J0XCI/MDMzNyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXNzcG9ydFwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInBhc3Nwb3J0XCJcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!****************!*\
  !*** ./app.js ***!
  \****************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(__dirname) {\n\nvar bodyParser = __webpack_require__(/*! body-parser */ 7);\nvar express = __webpack_require__(/*! express */ 0);\nvar models = __webpack_require__(/*! ./models */ 1);\nvar passport = __webpack_require__(/*! passport */ 5);\nvar path = __webpack_require__(/*! path */ 3);\n\nvar PORT = process.env.PORT || 8000;\n\nvar app = express();\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n\napp.use('/bin', express.static('./bin'));\napp.use(express.static(path.join(__dirname, '/public')));\napp.use(passport.initialize());\napp.use(passport.session());\n\n// Uncomment the following if you want to use handlebars\n// on the backend. (You must create the views folder)\n/*\nconst exphbs = require('express-handlebars');\napp.engine('handlebars', exphbs({\n  layoutsDir: './views/layouts',\n  defaultLayout: 'main',\n}));\napp.set('view engine', 'handlebars');\napp.set('views', `${__dirname}/views/`);\n*/\n\n// Load up all of the controllers\nvar controllers = __webpack_require__(/*! ./controllers */ 10);\napp.use(controllers);\n\n// First, make sure the Database tables and models are in sync\n// then, start up the server and start listening.\nmodels.sequelize.sync({ force: false }).then(function () {\n  app.listen(PORT, function () {\n    console.log('Server is up and running on port: ' + PORT);\n  });\n});\n/* WEBPACK VAR INJECTION */}.call(exports, \"/\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAuanM/MDM2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBtb2RlbHMgPSByZXF1aXJlKCcuL21vZGVscycpO1xuY29uc3QgcGFzc3BvcnQgPSByZXF1aXJlKCdwYXNzcG9ydCcpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDgwMDA7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuXG5hcHAudXNlKCcvYmluJywgZXhwcmVzcy5zdGF0aWMoJy4vYmluJykpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnL3B1YmxpYycpKSk7XG5hcHAudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5hcHAudXNlKHBhc3Nwb3J0LnNlc3Npb24oKSk7XG5cblxuLy8gVW5jb21tZW50IHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gdXNlIGhhbmRsZWJhcnNcbi8vIG9uIHRoZSBiYWNrZW5kLiAoWW91IG11c3QgY3JlYXRlIHRoZSB2aWV3cyBmb2xkZXIpXG4vKlxuY29uc3QgZXhwaGJzID0gcmVxdWlyZSgnZXhwcmVzcy1oYW5kbGViYXJzJyk7XG5hcHAuZW5naW5lKCdoYW5kbGViYXJzJywgZXhwaGJzKHtcbiAgbGF5b3V0c0RpcjogJy4vdmlld3MvbGF5b3V0cycsXG4gIGRlZmF1bHRMYXlvdXQ6ICdtYWluJyxcbn0pKTtcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2hhbmRsZWJhcnMnKTtcbmFwcC5zZXQoJ3ZpZXdzJywgYCR7X19kaXJuYW1lfS92aWV3cy9gKTtcbiovXG5cblxuXG4vLyBMb2FkIHVwIGFsbCBvZiB0aGUgY29udHJvbGxlcnNcbmNvbnN0IGNvbnRyb2xsZXJzID0gcmVxdWlyZSgnLi9jb250cm9sbGVycycpO1xuYXBwLnVzZShjb250cm9sbGVycylcblxuXG4vLyBGaXJzdCwgbWFrZSBzdXJlIHRoZSBEYXRhYmFzZSB0YWJsZXMgYW5kIG1vZGVscyBhcmUgaW4gc3luY1xuLy8gdGhlbiwgc3RhcnQgdXAgdGhlIHNlcnZlciBhbmQgc3RhcnQgbGlzdGVuaW5nLlxubW9kZWxzLnNlcXVlbGl6ZS5zeW5jKHtmb3JjZTogZmFsc2V9KVxuICAudGhlbigoKSA9PiB7XG4gICAgYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHVwIGFuZCBydW5uaW5nIG9uIHBvcnQ6ICR7UE9SVH1gKVxuICAgIH0pO1xuICB9KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAuanMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"body-parser\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImJvZHktcGFyc2VyXCI/NDY1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib2R5LXBhcnNlclwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImJvZHktcGFyc2VyXCJcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"fs\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImZzXCI/MmUwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImZzXCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/*!****************************!*\
  !*** ./config/config.json ***!
  \****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("throw new Error(\"Module build failed: SyntaxError: Unexpected token, expected ; (2:15)\\n\\n\\u001b[0m \\u001b[90m 1 | \\u001b[39m{\\n\\u001b[31m\\u001b[1m>\\u001b[22m\\u001b[39m\\u001b[90m 2 | \\u001b[39m  \\u001b[32m\\\"development\\\"\\u001b[39m\\u001b[33m:\\u001b[39m {\\n \\u001b[90m   | \\u001b[39m               \\u001b[31m\\u001b[1m^\\u001b[22m\\u001b[39m\\n \\u001b[90m 3 | \\u001b[39m    \\u001b[32m\\\"username\\\"\\u001b[39m\\u001b[33m:\\u001b[39m \\u001b[32m\\\"jinlin314\\\"\\u001b[39m\\u001b[33m,\\u001b[39m\\n \\u001b[90m 4 | \\u001b[39m    \\u001b[32m\\\"password\\\"\\u001b[39m\\u001b[33m:\\u001b[39m \\u001b[32m\\\"52AJin0654\\\"\\u001b[39m\\u001b[33m,\\u001b[39m\\n \\u001b[90m 5 | \\u001b[39m    \\u001b[32m\\\"database\\\"\\u001b[39m\\u001b[33m:\\u001b[39m \\u001b[32m\\\"poll-development\\\"\\u001b[39m\\u001b[33m,\\u001b[39m\\u001b[0m\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/*!******************************!*\
  !*** ./controllers/index.js ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar express = __webpack_require__(/*! express */ 0);\nvar router = express.Router();\n\nrouter.use('/alt', __webpack_require__(/*! ./alt */ 11));\nrouter.use('/', __webpack_require__(/*! ./home */ 12));\nrouter.use('/polls', __webpack_require__(/*! ./polls */ 13));\nrouter.use('/pollOptions', __webpack_require__(/*! ./pollOptions */ 14));\nrouter.use('/poll_option_detail', __webpack_require__(/*! ./poll_option_detail */ 15));\nrouter.use('/users', __webpack_require__(/*! ./users */ 16));\n\nmodule.exports = router;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvaW5kZXguanM/OWNjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuXG5yb3V0ZXIudXNlKCcvYWx0JywgcmVxdWlyZSgnLi9hbHQnKSk7XG5yb3V0ZXIudXNlKCcvJywgcmVxdWlyZSgnLi9ob21lJykpO1xucm91dGVyLnVzZSgnL3BvbGxzJywgcmVxdWlyZSgnLi9wb2xscycpKTtcbnJvdXRlci51c2UoJy9wb2xsT3B0aW9ucycsIHJlcXVpcmUoJy4vcG9sbE9wdGlvbnMnKSk7XG5yb3V0ZXIudXNlKCcvcG9sbF9vcHRpb25fZGV0YWlsJywgcmVxdWlyZSgnLi9wb2xsX29wdGlvbl9kZXRhaWwnKSk7XG5yb3V0ZXIudXNlKCcvdXNlcnMnLCByZXF1aXJlKCcuL3VzZXJzJykpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbnRyb2xsZXJzL2luZGV4LmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/*!****************************!*\
  !*** ./controllers/alt.js ***!
  \****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar express = __webpack_require__(/*! express */ 0);\nvar models = __webpack_require__(/*! ../models */ 1);\n\nvar AltController = {\n  registerRouter: function registerRouter() {\n    var router = express.Router();\n\n    router.get('/', this.index);\n    router.post('/', this.create);\n    router.put('/:id', this.update);\n    router.delete('/:id', this.delete);\n\n    return router;\n  },\n  index: function index(req, res) {\n    res.json({\n      msg: \"Successful GET to '/alt' route\"\n    });\n  },\n  create: function create(req, res) {\n    res.json({\n      msg: \"Successful POST to '/alt' route\"\n    });\n  },\n  update: function update(req, res) {\n    res.json({\n      msg: \"Successful PUT to '/alt' route\",\n      id: req.params.id\n    });\n  },\n  delete: function _delete(req, res) {\n    res.json({\n      msg: \"Successful DELETE to '/alt' route\",\n      id: req.params.id\n    });\n  }\n};\n\nmodule.exports = AltController.registerRouter();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvYWx0LmpzPzA5ZWIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IG1vZGVscyA9IHJlcXVpcmUoJy4uL21vZGVscycpO1xuXG5jb25zdCBBbHRDb250cm9sbGVyID0ge1xuICByZWdpc3RlclJvdXRlcigpIHtcbiAgICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gICAgcm91dGVyLmdldCgnLycsIHRoaXMuaW5kZXgpO1xuICAgIHJvdXRlci5wb3N0KCcvJywgdGhpcy5jcmVhdGUpO1xuICAgIHJvdXRlci5wdXQoJy86aWQnLCB0aGlzLnVwZGF0ZSk7XG4gICAgcm91dGVyLmRlbGV0ZSgnLzppZCcsIHRoaXMuZGVsZXRlKTtcblxuICAgIHJldHVybiByb3V0ZXI7XG4gIH0sXG4gIGluZGV4KHJlcSwgcmVzKSB7XG4gICAgcmVzLmpzb24oe1xuICAgICAgbXNnOiBcIlN1Y2Nlc3NmdWwgR0VUIHRvICcvYWx0JyByb3V0ZVwiXG4gICAgfSk7XG4gIH0sXG4gIGNyZWF0ZShyZXEsIHJlcykge1xuICAgIHJlcy5qc29uKHtcbiAgICAgIG1zZzogXCJTdWNjZXNzZnVsIFBPU1QgdG8gJy9hbHQnIHJvdXRlXCJcbiAgICB9KTtcbiAgfSxcbiAgdXBkYXRlKHJlcSwgcmVzKSB7XG4gICAgcmVzLmpzb24oe1xuICAgICAgbXNnOiBcIlN1Y2Nlc3NmdWwgUFVUIHRvICcvYWx0JyByb3V0ZVwiLFxuICAgICAgaWQ6IHJlcS5wYXJhbXMuaWRcbiAgICB9KTtcbiAgfSxcbiAgZGVsZXRlKHJlcSwgcmVzKSB7XG4gICAgcmVzLmpzb24oe1xuICAgICAgbXNnOiBcIlN1Y2Nlc3NmdWwgREVMRVRFIHRvICcvYWx0JyByb3V0ZVwiLFxuICAgICAgaWQ6IHJlcS5wYXJhbXMuaWRcbiAgICB9KTtcbiAgfSxcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBBbHRDb250cm9sbGVyLnJlZ2lzdGVyUm91dGVyKCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29udHJvbGxlcnMvYWx0LmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQWhDQTtBQUNBO0FBbUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/*!*****************************!*\
  !*** ./controllers/home.js ***!
  \*****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar express = __webpack_require__(/*! express */ 0);\nvar models = __webpack_require__(/*! ../models */ 1);\nvar router = express.Router();\nvar polls = models.Polls;\nvar pollOptions = models.PollOptions;\n\nrouter.get('/', function (req, res) {\n  res.json({\n    msg: \"Successful GET to '/' route\"\n  });\n});\n\nrouter.post('/', function (req, res) {\n  res.json({\n    msg: \"Successful POST to '/' route\"\n  });\n});\n\nrouter.put('/:id', function (req, res) {\n  res.json({\n    msg: \"Successful PUT to '/' route\",\n    id: req.params.id\n  });\n});\n\nrouter.delete('/:id', function (req, res) {\n  res.json({\n    msg: \"Successful DELETE to '/' route\",\n    id: req.params.id\n  });\n});\n\nmodule.exports = router;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvaG9tZS5qcz9iMzA3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBtb2RlbHMgPSByZXF1aXJlKCcuLi9tb2RlbHMnKTtcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCBwb2xscyA9IG1vZGVscy5Qb2xscztcbmNvbnN0IHBvbGxPcHRpb25zID0gbW9kZWxzLlBvbGxPcHRpb25zO1xuXG5yb3V0ZXIuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBtc2c6IFwiU3VjY2Vzc2Z1bCBHRVQgdG8gJy8nIHJvdXRlXCJcbiAgfSk7XG59KTtcblxucm91dGVyLnBvc3QoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oe1xuICAgIG1zZzogXCJTdWNjZXNzZnVsIFBPU1QgdG8gJy8nIHJvdXRlXCJcbiAgfSk7XG59KTtcblxucm91dGVyLnB1dCgnLzppZCcsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgbXNnOiBcIlN1Y2Nlc3NmdWwgUFVUIHRvICcvJyByb3V0ZVwiLFxuICAgIGlkOiByZXEucGFyYW1zLmlkXG4gIH0pO1xufSk7XG5cbnJvdXRlci5kZWxldGUoJy86aWQnLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oe1xuICAgIG1zZzogXCJTdWNjZXNzZnVsIERFTEVURSB0byAnLycgcm91dGVcIixcbiAgICBpZDogcmVxLnBhcmFtcy5pZFxuICB9KTtcbn0pO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbnRyb2xsZXJzL2hvbWUuanMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/*!******************************!*\
  !*** ./controllers/polls.js ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar express = __webpack_require__(/*! express */ 0);\nvar models = __webpack_require__(/*! ../models */ 1);\nvar router = express.Router();\nvar polls = models.Polls;\nvar pollOptions = models.PollOptions;\nvar poll_option_detail = models.Poll_option_detail;\nvar users = models.Users;\n\nvar _require = __webpack_require__(/*! ./utils */ 2),\n    mustBeLoggedIn = _require.mustBeLoggedIn;\n\n// since we define a many-to-many relationship for polls and pollOptions, and one to one relationship\n// for polls and users, we can include the pollOptions and users models with a poll. By including the\n// pollOption and users modesl, we not only getting the poll record back, we also get all the poll options associate\n// with the poll back, as well as its owner.\n\n\nrouter.get('/', function (req, res) {\n  polls.findAll({\n    include: [{ model: pollOptions }, { model: users }]\n  }).then(function (polls) {\n    return res.json(polls);\n  }).catch(console.error);\n});\n\n// if poll #1 has four options, by get('/polls/:1'), we get poll #1's info,\n// as well as all its four options' info.\nrouter.get('/:pollId', function (req, res) {\n  polls.findOne({\n    where: { id: req.params.pollId },\n    include: [{ model: pollOptions }]\n  }).then(function (poll) {\n    res.json(poll);\n  }).catch(console.error);\n});\n\nrouter.post('/', function (req, res, next) {\n  // if an user is loggedIn, user object will be stored in req.user, we can check if an user is logged in\n  // by checking req.user === null, if no user is logged in, we then throw an error, 'must be loggedIn'\n  mustBeLoggedIn(req, res, next);\n\n  var question = req.body.question;\n  var options = req.body.options; // req.body.option is a array of options id, e.g. [1,2,3]\n  // to create a poll, we first create the poll's own record, which is its question\n  polls.create({ question: question })\n  // then we got the tempPoll created, and we want to associate this poll with options\n  // in the options table by calling the built-in sequelize method \"addPollOptions\",\n  // the associations will be store in 'poll_option_detail' table\n  .then(function (tempPoll) {\n    tempPoll.addPollOptions(options);\n    // poll belongs to one owner(user), we use built-in setUser method to set the association\n    // the UserId will then be stored in Polls table as an extra column\n    return tempPoll.setUser(1);\n  }).then(function (createdPoll) {\n    res.status(201).json({ createdPoll: createdPoll });\n  }).catch(console.error);\n});\n\n// this route is used to update the votes if someone make a vote for a poll\n// and we assuming user can only select one option for each poll\nrouter.put('/:id', function (req, res, next) {\n  mustBeLoggedIn(req, res, next);\n\n  // if someone vote for poll (eg: PollId=1) with an option (eg: PollOptionId=3)\n  // since the votes count is store in 'poll_option_detail' table, we need to fine the\n  // poll_option_detail record whose PollID = 1 (req.params.id) & PollOptionId = 3 (req.body.optionId)\n  poll_option_detail.findOne({\n    where: {\n      PollOptionId: req.body.optionId\n    }\n  })\n  // after we found the record, we want to increase the votes count for this record by 1\n  // we achieve this by calling update() method\n  .then(function (foundRecord) {\n    return foundRecord.update({ votes: foundRecord.votes + 1 });\n  }).then(function (updatedRecord) {\n    // use and poll_option_detail is many-to-many relationship, so we use built-in method addUser method\n    // to record who voted this option for this poll. this record is store in the join table, 'user-choice'\n    return updatedRecord.addUser([req.user]);\n  }).then(function (result) {\n    return res.status(201).json(result);\n  }).catch(console.error);\n});\n\n// to delete a poll, we will also like to delete all its associated record\n// in the join table, 'poll_option_detail', but this is already taken care\n// in the poll's model's beforeDestroy hook (check the poll model out ).\n// Thus, we only need to delete the poll, and sequelize will take care of\n// the rest for us\nrouter.delete('/:id', function (req, res, next) {\n  mustBeLoggedIn(req, res, next);\n\n  polls.findOne({\n    where: { id: req.params.id },\n    include: [{ model: users }]\n  }).then(function (foundPoll) {\n    // you can only delete the polls you created, thus, we compare the foundPoll's UserId with\n    // loggedIn user's id, if you are the owner, you can't delete the poll\n    if (foundPoll.UserId !== req.user.id) {\n      var err = new Error('You do not have authorization to delete this poll.');\n      err.status = 403;\n      throw err;\n    } else {\n      return polls.destroy({\n        where: { id: req.params.id }\n      });\n    }\n  }).then(function (deletedPoll) {\n    res.status(204).json(deletedPoll);\n  }).catch(console.error);\n});\n\nmodule.exports = router;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvcG9sbHMuanM/NTQyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCBtb2RlbHMgPSByZXF1aXJlKCcuLi9tb2RlbHMnKVxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKVxuY29uc3QgcG9sbHMgPSBtb2RlbHMuUG9sbHNcbmNvbnN0IHBvbGxPcHRpb25zID0gbW9kZWxzLlBvbGxPcHRpb25zXG5jb25zdCBwb2xsX29wdGlvbl9kZXRhaWwgPSBtb2RlbHMuUG9sbF9vcHRpb25fZGV0YWlsXG5jb25zdCB1c2VycyA9IG1vZGVscy5Vc2Vyc1xuY29uc3QgeyBtdXN0QmVMb2dnZWRJbiB9ID0gcmVxdWlyZSgnLi91dGlscycpXG5cbi8vIHNpbmNlIHdlIGRlZmluZSBhIG1hbnktdG8tbWFueSByZWxhdGlvbnNoaXAgZm9yIHBvbGxzIGFuZCBwb2xsT3B0aW9ucywgYW5kIG9uZSB0byBvbmUgcmVsYXRpb25zaGlwXG4vLyBmb3IgcG9sbHMgYW5kIHVzZXJzLCB3ZSBjYW4gaW5jbHVkZSB0aGUgcG9sbE9wdGlvbnMgYW5kIHVzZXJzIG1vZGVscyB3aXRoIGEgcG9sbC4gQnkgaW5jbHVkaW5nIHRoZVxuLy8gcG9sbE9wdGlvbiBhbmQgdXNlcnMgbW9kZXNsLCB3ZSBub3Qgb25seSBnZXR0aW5nIHRoZSBwb2xsIHJlY29yZCBiYWNrLCB3ZSBhbHNvIGdldCBhbGwgdGhlIHBvbGwgb3B0aW9ucyBhc3NvY2lhdGVcbi8vIHdpdGggdGhlIHBvbGwgYmFjaywgYXMgd2VsbCBhcyBpdHMgb3duZXIuXG5yb3V0ZXIuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIHBvbGxzLmZpbmRBbGwoe1xuICAgIGluY2x1ZGU6IFsgeyBtb2RlbDogcG9sbE9wdGlvbnMgfSwge21vZGVsOiB1c2Vyc30gXVxuICB9KVxuICAudGhlbihwb2xscyA9PiByZXMuanNvbihwb2xscykpXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKVxufSlcblxuLy8gaWYgcG9sbCAjMSBoYXMgZm91ciBvcHRpb25zLCBieSBnZXQoJy9wb2xscy86MScpLCB3ZSBnZXQgcG9sbCAjMSdzIGluZm8sXG4vLyBhcyB3ZWxsIGFzIGFsbCBpdHMgZm91ciBvcHRpb25zJyBpbmZvLlxucm91dGVyLmdldCgnLzpwb2xsSWQnLCAocmVxLCByZXMpID0+IHtcbiAgcG9sbHMuZmluZE9uZSh7XG4gICAgd2hlcmU6IHtpZDogcmVxLnBhcmFtcy5wb2xsSWR9LFxuICAgIGluY2x1ZGU6IFsgeyBtb2RlbDogcG9sbE9wdGlvbnMgfSBdXG4gIH0pXG4gIC50aGVuKHBvbGwgPT4ge1xuICAgIHJlcy5qc29uKHBvbGwpXG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKVxufSlcblxucm91dGVyLnBvc3QoJy8nLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gaWYgYW4gdXNlciBpcyBsb2dnZWRJbiwgdXNlciBvYmplY3Qgd2lsbCBiZSBzdG9yZWQgaW4gcmVxLnVzZXIsIHdlIGNhbiBjaGVjayBpZiBhbiB1c2VyIGlzIGxvZ2dlZCBpblxuICAvLyBieSBjaGVja2luZyByZXEudXNlciA9PT0gbnVsbCwgaWYgbm8gdXNlciBpcyBsb2dnZWQgaW4sIHdlIHRoZW4gdGhyb3cgYW4gZXJyb3IsICdtdXN0IGJlIGxvZ2dlZEluJ1xuICBtdXN0QmVMb2dnZWRJbihyZXEsIHJlcywgbmV4dClcblxuICBsZXQgcXVlc3Rpb24gPSByZXEuYm9keS5xdWVzdGlvblxuICBsZXQgb3B0aW9ucyA9IHJlcS5ib2R5Lm9wdGlvbnMgLy8gcmVxLmJvZHkub3B0aW9uIGlzIGEgYXJyYXkgb2Ygb3B0aW9ucyBpZCwgZS5nLiBbMSwyLDNdXG4gIC8vIHRvIGNyZWF0ZSBhIHBvbGwsIHdlIGZpcnN0IGNyZWF0ZSB0aGUgcG9sbCdzIG93biByZWNvcmQsIHdoaWNoIGlzIGl0cyBxdWVzdGlvblxuICBwb2xscy5jcmVhdGUoe3F1ZXN0aW9uOiBxdWVzdGlvbn0pXG4gIC8vIHRoZW4gd2UgZ290IHRoZSB0ZW1wUG9sbCBjcmVhdGVkLCBhbmQgd2Ugd2FudCB0byBhc3NvY2lhdGUgdGhpcyBwb2xsIHdpdGggb3B0aW9uc1xuICAvLyBpbiB0aGUgb3B0aW9ucyB0YWJsZSBieSBjYWxsaW5nIHRoZSBidWlsdC1pbiBzZXF1ZWxpemUgbWV0aG9kIFwiYWRkUG9sbE9wdGlvbnNcIixcbiAgLy8gdGhlIGFzc29jaWF0aW9ucyB3aWxsIGJlIHN0b3JlIGluICdwb2xsX29wdGlvbl9kZXRhaWwnIHRhYmxlXG4gIC50aGVuKHRlbXBQb2xsID0+IHtcbiAgICB0ZW1wUG9sbC5hZGRQb2xsT3B0aW9ucyhvcHRpb25zKVxuICAgIC8vIHBvbGwgYmVsb25ncyB0byBvbmUgb3duZXIodXNlciksIHdlIHVzZSBidWlsdC1pbiBzZXRVc2VyIG1ldGhvZCB0byBzZXQgdGhlIGFzc29jaWF0aW9uXG4gICAgLy8gdGhlIFVzZXJJZCB3aWxsIHRoZW4gYmUgc3RvcmVkIGluIFBvbGxzIHRhYmxlIGFzIGFuIGV4dHJhIGNvbHVtblxuICAgIHJldHVybiB0ZW1wUG9sbC5zZXRVc2VyKDEpXG4gIH0pXG4gIC50aGVuKGNyZWF0ZWRQb2xsID0+IHtcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7Y3JlYXRlZFBvbGx9KTtcbiAgfSlcbiAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufSlcblxuLy8gdGhpcyByb3V0ZSBpcyB1c2VkIHRvIHVwZGF0ZSB0aGUgdm90ZXMgaWYgc29tZW9uZSBtYWtlIGEgdm90ZSBmb3IgYSBwb2xsXG4vLyBhbmQgd2UgYXNzdW1pbmcgdXNlciBjYW4gb25seSBzZWxlY3Qgb25lIG9wdGlvbiBmb3IgZWFjaCBwb2xsXG5yb3V0ZXIucHV0KCcvOmlkJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIG11c3RCZUxvZ2dlZEluKHJlcSwgcmVzLCBuZXh0KVxuXG4gIC8vIGlmIHNvbWVvbmUgdm90ZSBmb3IgcG9sbCAoZWc6IFBvbGxJZD0xKSB3aXRoIGFuIG9wdGlvbiAoZWc6IFBvbGxPcHRpb25JZD0zKVxuICAvLyBzaW5jZSB0aGUgdm90ZXMgY291bnQgaXMgc3RvcmUgaW4gJ3BvbGxfb3B0aW9uX2RldGFpbCcgdGFibGUsIHdlIG5lZWQgdG8gZmluZSB0aGVcbiAgLy8gcG9sbF9vcHRpb25fZGV0YWlsIHJlY29yZCB3aG9zZSBQb2xsSUQgPSAxIChyZXEucGFyYW1zLmlkKSAmIFBvbGxPcHRpb25JZCA9IDMgKHJlcS5ib2R5Lm9wdGlvbklkKVxuICBwb2xsX29wdGlvbl9kZXRhaWwuZmluZE9uZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIFBvbGxPcHRpb25JZDogcmVxLmJvZHkub3B0aW9uSWQsXG4gICAgfVxuICB9KVxuICAvLyBhZnRlciB3ZSBmb3VuZCB0aGUgcmVjb3JkLCB3ZSB3YW50IHRvIGluY3JlYXNlIHRoZSB2b3RlcyBjb3VudCBmb3IgdGhpcyByZWNvcmQgYnkgMVxuICAvLyB3ZSBhY2hpZXZlIHRoaXMgYnkgY2FsbGluZyB1cGRhdGUoKSBtZXRob2RcbiAgLnRoZW4oZm91bmRSZWNvcmQgPT4ge1xuICAgIHJldHVybiBmb3VuZFJlY29yZC51cGRhdGUoeyB2b3RlczogZm91bmRSZWNvcmQudm90ZXMgKyAxIH0pXG4gIH0pXG4gIC50aGVuKHVwZGF0ZWRSZWNvcmQgPT4ge1xuICAgIC8vIHVzZSBhbmQgcG9sbF9vcHRpb25fZGV0YWlsIGlzIG1hbnktdG8tbWFueSByZWxhdGlvbnNoaXAsIHNvIHdlIHVzZSBidWlsdC1pbiBtZXRob2QgYWRkVXNlciBtZXRob2RcbiAgICAvLyB0byByZWNvcmQgd2hvIHZvdGVkIHRoaXMgb3B0aW9uIGZvciB0aGlzIHBvbGwuIHRoaXMgcmVjb3JkIGlzIHN0b3JlIGluIHRoZSBqb2luIHRhYmxlLCAndXNlci1jaG9pY2UnXG4gICAgcmV0dXJuIHVwZGF0ZWRSZWNvcmQuYWRkVXNlcihbcmVxLnVzZXJdKVxuICB9KVxuICAudGhlbihyZXN1bHQgPT4gcmVzLnN0YXR1cygyMDEpLmpzb24ocmVzdWx0KSlcbiAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufSlcblxuLy8gdG8gZGVsZXRlIGEgcG9sbCwgd2Ugd2lsbCBhbHNvIGxpa2UgdG8gZGVsZXRlIGFsbCBpdHMgYXNzb2NpYXRlZCByZWNvcmRcbi8vIGluIHRoZSBqb2luIHRhYmxlLCAncG9sbF9vcHRpb25fZGV0YWlsJywgYnV0IHRoaXMgaXMgYWxyZWFkeSB0YWtlbiBjYXJlXG4vLyBpbiB0aGUgcG9sbCdzIG1vZGVsJ3MgYmVmb3JlRGVzdHJveSBob29rIChjaGVjayB0aGUgcG9sbCBtb2RlbCBvdXQgKS5cbi8vIFRodXMsIHdlIG9ubHkgbmVlZCB0byBkZWxldGUgdGhlIHBvbGwsIGFuZCBzZXF1ZWxpemUgd2lsbCB0YWtlIGNhcmUgb2Zcbi8vIHRoZSByZXN0IGZvciB1c1xucm91dGVyLmRlbGV0ZSgnLzppZCcsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBtdXN0QmVMb2dnZWRJbihyZXEsIHJlcywgbmV4dClcblxuICBwb2xscy5maW5kT25lKHtcbiAgICB3aGVyZTogeyBpZDogcmVxLnBhcmFtcy5pZCB9LFxuICAgIGluY2x1ZGU6IFsge21vZGVsOiB1c2Vyc30gXVxuICB9KVxuICAgIC50aGVuKGZvdW5kUG9sbCA9PiB7XG4gICAgICAvLyB5b3UgY2FuIG9ubHkgZGVsZXRlIHRoZSBwb2xscyB5b3UgY3JlYXRlZCwgdGh1cywgd2UgY29tcGFyZSB0aGUgZm91bmRQb2xsJ3MgVXNlcklkIHdpdGhcbiAgICAgIC8vIGxvZ2dlZEluIHVzZXIncyBpZCwgaWYgeW91IGFyZSB0aGUgb3duZXIsIHlvdSBjYW4ndCBkZWxldGUgdGhlIHBvbGxcbiAgICAgIGlmKGZvdW5kUG9sbC5Vc2VySWQgIT09IHJlcS51c2VyLmlkKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgWW91IGRvIG5vdCBoYXZlIGF1dGhvcml6YXRpb24gdG8gZGVsZXRlIHRoaXMgcG9sbC5gKVxuICAgICAgICBlcnIuc3RhdHVzID0gNDAzXG4gICAgICAgIHRocm93IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBvbGxzLmRlc3Ryb3koe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiByZXEucGFyYW1zLmlkIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAudGhlbihkZWxldGVkUG9sbCA9PiB7XG4gICAgcmVzLnN0YXR1cygyMDQpLmpzb24oZGVsZXRlZFBvbGwpO1xuICB9KVxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG59KVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb250cm9sbGVycy9wb2xscy5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/*!************************************!*\
  !*** ./controllers/pollOptions.js ***!
  \************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar express = __webpack_require__(/*! express */ 0);\nvar models = __webpack_require__(/*! ../models */ 1);\nvar router = express.Router();\nvar Sequelize = __webpack_require__(/*! sequelize */ 4);\nvar Op = Sequelize.Op;\nvar pollOptions = models.PollOptions;\n\nvar _require = __webpack_require__(/*! ./utils */ 2),\n    mustBeLoggedIn = _require.mustBeLoggedIn;\n\nrouter.get('/', function (req, res) {\n  pollOptions.findAll().then(function (pollOptions) {\n    return res.json(pollOptions);\n  }).catch(console.error);\n});\n\n// returns 8 most common options, so users do not need to created more same/similar options\nrouter.get('/most_common', function (req, res) {\n  pollOptions.findAll({\n    where: { id: _defineProperty({}, Op.lte, 8) // sequelize comparator: id <= 8\n    } }).then(function (pollOptions) {\n    return res.json(pollOptions);\n  }).catch(console.error);\n});\n\nrouter.get('/:pollOptionId', function (req, res) {\n  pollOptions.findById(req.params.pollOptionId).then(function (pollOption) {\n    res.json(pollOption);\n  }).catch(console.error);\n});\n\n// only logged user can created poll option\n// user can add customized options\nrouter.post('/', function (req, res, next) {\n  mustBeLoggedIn(req, res, next);\n\n  var text = req.body.text;\n  pollOptions.create({ text: text }).then(function (createdPollOption) {\n    res.json(createdPollOption);\n  }).catch(console.error);\n});\n\n// === below methods not yet defined === //\n\nrouter.put('/:id', function (req, res) {\n  res.json({\n    msg: \"Successful PUT to '/' route\",\n    id: req.params.id\n  });\n});\n\nrouter.delete('/:id', function (req, res) {\n  res.json({\n    msg: \"Successful DELETE to '/' route\",\n    id: req.params.id\n  });\n});\n\nmodule.exports = router;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvcG9sbE9wdGlvbnMuanM/YWE4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCBtb2RlbHMgPSByZXF1aXJlKCcuLi9tb2RlbHMnKVxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKVxudmFyIFNlcXVlbGl6ZSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpXG5jb25zdCBPcCA9IFNlcXVlbGl6ZS5PcFxuY29uc3QgcG9sbE9wdGlvbnMgPSBtb2RlbHMuUG9sbE9wdGlvbnNcbmNvbnN0IHsgbXVzdEJlTG9nZ2VkSW4gfSA9IHJlcXVpcmUoJy4vdXRpbHMnKVxuXG5yb3V0ZXIuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIHBvbGxPcHRpb25zLmZpbmRBbGwoKVxuICAudGhlbihwb2xsT3B0aW9ucyA9PiByZXMuanNvbihwb2xsT3B0aW9ucykpXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKVxufSlcblxuLy8gcmV0dXJucyA4IG1vc3QgY29tbW9uIG9wdGlvbnMsIHNvIHVzZXJzIGRvIG5vdCBuZWVkIHRvIGNyZWF0ZWQgbW9yZSBzYW1lL3NpbWlsYXIgb3B0aW9uc1xucm91dGVyLmdldCgnL21vc3RfY29tbW9uJywgKHJlcSwgcmVzKSA9PiB7XG4gIHBvbGxPcHRpb25zLmZpbmRBbGwoe1xuICAgIHdoZXJlOiB7aWQ6IHtbT3AubHRlXTogOH19IC8vIHNlcXVlbGl6ZSBjb21wYXJhdG9yOiBpZCA8PSA4XG4gIH0pXG4gICAgLnRoZW4ocG9sbE9wdGlvbnMgPT4gcmVzLmpzb24ocG9sbE9wdGlvbnMpKVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxufSlcblxucm91dGVyLmdldCgnLzpwb2xsT3B0aW9uSWQnLCAocmVxLCByZXMpID0+IHtcbiAgcG9sbE9wdGlvbnMuZmluZEJ5SWQocmVxLnBhcmFtcy5wb2xsT3B0aW9uSWQpXG4gIC50aGVuKHBvbGxPcHRpb24gPT4ge1xuICAgIHJlcy5qc29uKHBvbGxPcHRpb24pXG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKVxufSlcblxuLy8gb25seSBsb2dnZWQgdXNlciBjYW4gY3JlYXRlZCBwb2xsIG9wdGlvblxuLy8gdXNlciBjYW4gYWRkIGN1c3RvbWl6ZWQgb3B0aW9uc1xucm91dGVyLnBvc3QoJy8nLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgbXVzdEJlTG9nZ2VkSW4ocmVxLCByZXMsIG5leHQpXG5cbiAgbGV0IHRleHQgPSByZXEuYm9keS50ZXh0O1xuICBwb2xsT3B0aW9ucy5jcmVhdGUoe3RleHQ6IHRleHR9KVxuICAudGhlbihjcmVhdGVkUG9sbE9wdGlvbiA9PiB7XG4gICAgcmVzLmpzb24oY3JlYXRlZFBvbGxPcHRpb24pO1xuICB9KVxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG59KTtcblxuLy8gPT09IGJlbG93IG1ldGhvZHMgbm90IHlldCBkZWZpbmVkID09PSAvL1xuXG5yb3V0ZXIucHV0KCcvOmlkJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBtc2c6IFwiU3VjY2Vzc2Z1bCBQVVQgdG8gJy8nIHJvdXRlXCIsXG4gICAgaWQ6IHJlcS5wYXJhbXMuaWRcbiAgfSk7XG59KTtcblxucm91dGVyLmRlbGV0ZSgnLzppZCcsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgbXNnOiBcIlN1Y2Nlc3NmdWwgREVMRVRFIHRvICcvJyByb3V0ZVwiLFxuICAgIGlkOiByZXEucGFyYW1zLmlkXG4gIH0pO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbnRyb2xsZXJzL3BvbGxPcHRpb25zLmpzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/*!*******************************************!*\
  !*** ./controllers/poll_option_detail.js ***!
  \*******************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar express = __webpack_require__(/*! express */ 0);\nvar models = __webpack_require__(/*! ../models */ 1);\nvar router = express.Router();\nvar polls = models.Polls;\nvar pollOptions = models.PollOptions;\nvar poll_option_detail = models.Poll_option_detail;\n\n// if you want to get the votes count for each option of a poll (eg: poll #3 who has two options)\n// you can call get('/poll_option_detail/?PollId=3'), information after '?' are the queries, which are stored in req.query\n// The 'poll_detail' will look something like below:\n// [\n// {\n//   \"id\": 9,\n//   \"votes\": 0,\n//   \"createdAt\": \"2017-10-18T16:04:57.170Z\",\n//   \"updatedAt\": \"2017-10-18T16:04:57.170Z\",\n//   \"PollOptionId\": 1,\n//   \"PollId\": 3\n// },\n// {\n//   \"id\": 10,\n//   \"votes\": 0,\n//   \"createdAt\": \"2017-10-18T16:04:57.170Z\",\n//   \"updatedAt\": \"2017-10-18T16:04:57.170Z\",\n//   \"PollOptionId\": 2,\n//   \"PollId\": 3\n// }\n// ]\n// if you only want to get the votes for a specific pollOption of a poll, eg: poll #3, option #1\n// you can call get('/poll_option_detail/?PollId=3&PollOptionId=1')\n// the 'poll_detail' will look something like this:\n// [\n//   {\n//     \"id\": 9,\n//     \"votes\": 0,\n//     \"createdAt\": \"2017-10-18T16:04:57.170Z\",\n//     \"updatedAt\": \"2017-10-18T16:04:57.170Z\",\n//     \"PollOptionId\": 1,\n//     \"PollId\": 3\n//   }\n// ]\nrouter.get('/', function (req, res) {\n  poll_option_detail.findAll({\n    where: req.query\n  }).then(function (poll_detail) {\n    return res.json(poll_detail);\n  }).catch(console.error);\n});\n\nmodule.exports = router;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvcG9sbF9vcHRpb25fZGV0YWlsLmpzPzZhZjgiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IG1vZGVscyA9IHJlcXVpcmUoJy4uL21vZGVscycpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmNvbnN0IHBvbGxzID0gbW9kZWxzLlBvbGxzO1xuY29uc3QgcG9sbE9wdGlvbnMgPSBtb2RlbHMuUG9sbE9wdGlvbnM7XG5jb25zdCBwb2xsX29wdGlvbl9kZXRhaWwgPSBtb2RlbHMuUG9sbF9vcHRpb25fZGV0YWlsO1xuXG4vLyBpZiB5b3Ugd2FudCB0byBnZXQgdGhlIHZvdGVzIGNvdW50IGZvciBlYWNoIG9wdGlvbiBvZiBhIHBvbGwgKGVnOiBwb2xsICMzIHdobyBoYXMgdHdvIG9wdGlvbnMpXG4vLyB5b3UgY2FuIGNhbGwgZ2V0KCcvcG9sbF9vcHRpb25fZGV0YWlsLz9Qb2xsSWQ9MycpLCBpbmZvcm1hdGlvbiBhZnRlciAnPycgYXJlIHRoZSBxdWVyaWVzLCB3aGljaCBhcmUgc3RvcmVkIGluIHJlcS5xdWVyeVxuLy8gVGhlICdwb2xsX2RldGFpbCcgd2lsbCBsb29rIHNvbWV0aGluZyBsaWtlIGJlbG93OlxuLy8gW1xuLy8ge1xuLy8gICBcImlkXCI6IDksXG4vLyAgIFwidm90ZXNcIjogMCxcbi8vICAgXCJjcmVhdGVkQXRcIjogXCIyMDE3LTEwLTE4VDE2OjA0OjU3LjE3MFpcIixcbi8vICAgXCJ1cGRhdGVkQXRcIjogXCIyMDE3LTEwLTE4VDE2OjA0OjU3LjE3MFpcIixcbi8vICAgXCJQb2xsT3B0aW9uSWRcIjogMSxcbi8vICAgXCJQb2xsSWRcIjogM1xuLy8gfSxcbi8vIHtcbi8vICAgXCJpZFwiOiAxMCxcbi8vICAgXCJ2b3Rlc1wiOiAwLFxuLy8gICBcImNyZWF0ZWRBdFwiOiBcIjIwMTctMTAtMThUMTY6MDQ6NTcuMTcwWlwiLFxuLy8gICBcInVwZGF0ZWRBdFwiOiBcIjIwMTctMTAtMThUMTY6MDQ6NTcuMTcwWlwiLFxuLy8gICBcIlBvbGxPcHRpb25JZFwiOiAyLFxuLy8gICBcIlBvbGxJZFwiOiAzXG4vLyB9XG4vLyBdXG4vLyBpZiB5b3Ugb25seSB3YW50IHRvIGdldCB0aGUgdm90ZXMgZm9yIGEgc3BlY2lmaWMgcG9sbE9wdGlvbiBvZiBhIHBvbGwsIGVnOiBwb2xsICMzLCBvcHRpb24gIzFcbi8vIHlvdSBjYW4gY2FsbCBnZXQoJy9wb2xsX29wdGlvbl9kZXRhaWwvP1BvbGxJZD0zJlBvbGxPcHRpb25JZD0xJylcbi8vIHRoZSAncG9sbF9kZXRhaWwnIHdpbGwgbG9vayBzb21ldGhpbmcgbGlrZSB0aGlzOlxuLy8gW1xuLy8gICB7XG4vLyAgICAgXCJpZFwiOiA5LFxuLy8gICAgIFwidm90ZXNcIjogMCxcbi8vICAgICBcImNyZWF0ZWRBdFwiOiBcIjIwMTctMTAtMThUMTY6MDQ6NTcuMTcwWlwiLFxuLy8gICAgIFwidXBkYXRlZEF0XCI6IFwiMjAxNy0xMC0xOFQxNjowNDo1Ny4xNzBaXCIsXG4vLyAgICAgXCJQb2xsT3B0aW9uSWRcIjogMSxcbi8vICAgICBcIlBvbGxJZFwiOiAzXG4vLyAgIH1cbi8vIF1cbnJvdXRlci5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgcG9sbF9vcHRpb25fZGV0YWlsLmZpbmRBbGwoe1xuICAgIHdoZXJlOiByZXEucXVlcnlcbiAgfSlcbiAgLnRoZW4ocG9sbF9kZXRhaWwgPT4gcmVzLmpzb24ocG9sbF9kZXRhaWwpKVxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29udHJvbGxlcnMvcG9sbF9vcHRpb25fZGV0YWlsLmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/*!******************************!*\
  !*** ./controllers/users.js ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar express = __webpack_require__(/*! express */ 0);\nvar router = express.Router();\nvar passport = __webpack_require__(/*! passport */ 5);\nvar LocalStrategy = __webpack_require__(/*! passport-local */ 17).Strategy;\nvar models = __webpack_require__(/*! ../models */ 1);\nvar users = models.Users;\nvar polls = models.Polls;\nvar pollOptions = models.PollOptions;\nvar poll_option_detail = models.Poll_option_detail;\n\nvar _require = __webpack_require__(/*! ./utils */ 2),\n    mustBeLoggedIn = _require.mustBeLoggedIn;\n\npassport.serializeUser(function (user, done) {\n  done(null, user.id);\n});\n\npassport.deserializeUser(function (id, done) {\n  users.findById(id, function (err, user) {\n    done(err, user);\n  });\n});\n\npassport.use('local-signup', new LocalStrategy({\n  usernameField: 'email',\n  passwordField: 'password',\n  passReqToCallback: true\n}, function (req, email, password, done) {\n  process.nextTick(function () {\n    users.findOne({\n      where: { email: email }\n    }).then(function (user) {\n      if (user) {\n        return done(null, false, { message: 'this email is already taken' });\n      } else {\n        return users.create({\n          email: email,\n          password: password\n        });\n      }\n    }).then(function (createdUser) {\n      console.log(\"===== user\", createdUser.email);\n      done(null, createdUser);\n    }).catch(done);\n  });\n}));\n\npassport.use('local-login', new LocalStrategy({\n  usernameField: 'email',\n  passwordField: 'password',\n  passReqToCallback: true\n}, function (req, email, password, done) {\n  process.nextTick(function () {\n    users.findOne({\n      where: { email: email },\n      attributes: { include: ['password_hashed'] }\n    }).then(function (user) {\n      if (!user) {\n        return done(null, false, { message: 'Login incorrect' });\n      }\n      return user.authenticate(password).then(function (ok) {\n        if (!ok) {\n          return done(null, false, { message: 'Login incorrect' });\n        }\n        done(null, user);\n      });\n    }).catch(done);\n  });\n}));\n\nrouter.post('/signup', passport.authenticate('local-signup', { successRedirect: '/' }));\n\nrouter.post('/login', passport.authenticate('local-login', { successRedirect: '/' }));\n\n// to get all the poll this loggedin user created, include all the polls' associated options\nrouter.get('/polls', function (req, res, next) {\n  polls.findAll({\n    where: { UserId: req.user.id },\n    include: [{ model: pollOptions }]\n  }).then(function (polls) {\n    return res.json(polls);\n  }).catch(next);\n});\n\n// to get all the poll choices this loggedin user had voted, we can join the poll_option_detail\n// table with users table, filter out those user.id === req.user.id\nrouter.get('/voted', function (req, res, next) {\n  mustBeLoggedIn(req, res, next);\n\n  poll_option_detail.findAll({\n    include: [{ model: users, where: { id: req.user.id } }]\n  }).then(function (voted) {\n    return res.json(voted);\n  }).catch(next);\n});\n\nmodule.exports = router;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvdXNlcnMuanM/NzFkZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmNvbnN0IHBhc3Nwb3J0ID0gcmVxdWlyZSgncGFzc3BvcnQnKTtcbmNvbnN0IExvY2FsU3RyYXRlZ3kgPSByZXF1aXJlKCdwYXNzcG9ydC1sb2NhbCcpLlN0cmF0ZWd5O1xuY29uc3QgbW9kZWxzID0gcmVxdWlyZSgnLi4vbW9kZWxzJyk7XG5jb25zdCB1c2VycyA9IG1vZGVscy5Vc2VycztcbmNvbnN0IHBvbGxzID0gbW9kZWxzLlBvbGxzO1xuY29uc3QgcG9sbE9wdGlvbnMgPSBtb2RlbHMuUG9sbE9wdGlvbnM7XG5jb25zdCBwb2xsX29wdGlvbl9kZXRhaWwgPSBtb2RlbHMuUG9sbF9vcHRpb25fZGV0YWlsO1xuY29uc3QgeyBtdXN0QmVMb2dnZWRJbiB9ID0gcmVxdWlyZSgnLi91dGlscycpXG5cbnBhc3Nwb3J0LnNlcmlhbGl6ZVVzZXIoZnVuY3Rpb24odXNlciwgZG9uZSl7XG4gIGRvbmUobnVsbCwgdXNlci5pZCk7XG59KTtcblxucGFzc3BvcnQuZGVzZXJpYWxpemVVc2VyKGZ1bmN0aW9uKGlkLCBkb25lKXtcbiAgdXNlcnMuZmluZEJ5SWQoaWQsIGZ1bmN0aW9uKGVyciwgdXNlcil7XG4gICAgZG9uZShlcnIsIHVzZXIpO1xuICB9KTtcbn0pO1xuXG5wYXNzcG9ydC51c2UoJ2xvY2FsLXNpZ251cCcsIG5ldyBMb2NhbFN0cmF0ZWd5KHtcbiAgICB1c2VybmFtZUZpZWxkOiAnZW1haWwnLFxuICAgIHBhc3N3b3JkRmllbGQ6ICdwYXNzd29yZCcsXG4gICAgcGFzc1JlcVRvQ2FsbGJhY2s6IHRydWVcbiAgfSxcbiAgZnVuY3Rpb24ocmVxLCBlbWFpbCwgcGFzc3dvcmQsIGRvbmUpe1xuICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKXtcbiAgICAgIHVzZXJzLmZpbmRPbmUoe1xuICAgICAgICB3aGVyZToge2VtYWlsOiBlbWFpbH1cbiAgICAgIH0pXG4gICAgICAgIC50aGVuKHVzZXIgPT4ge1xuICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9uZShudWxsLCBmYWxzZSwgeyBtZXNzYWdlOiAndGhpcyBlbWFpbCBpcyBhbHJlYWR5IHRha2VuJyB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlcnMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihjcmVhdGVkVXNlciA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCI9PT09PSB1c2VyXCIsIGNyZWF0ZWRVc2VyLmVtYWlsKVxuICAgICAgICAgIGRvbmUobnVsbCwgY3JlYXRlZFVzZXIpXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChkb25lKTtcbiAgICB9KTtcbiAgfSkpO1xuXG5wYXNzcG9ydC51c2UoJ2xvY2FsLWxvZ2luJywgbmV3IExvY2FsU3RyYXRlZ3koe1xuICAgIHVzZXJuYW1lRmllbGQ6ICdlbWFpbCcsXG4gICAgcGFzc3dvcmRGaWVsZDogJ3Bhc3N3b3JkJyxcbiAgICBwYXNzUmVxVG9DYWxsYmFjazogdHJ1ZVxuICB9LFxuICBmdW5jdGlvbihyZXEsIGVtYWlsLCBwYXNzd29yZCwgZG9uZSl7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpe1xuICAgICAgdXNlcnMuZmluZE9uZSh7XG4gICAgICAgIHdoZXJlOiB7ZW1haWx9LFxuICAgICAgICBhdHRyaWJ1dGVzOiB7aW5jbHVkZTogWydwYXNzd29yZF9oYXNoZWQnXX1cbiAgICAgIH0pXG4gICAgICAgIC50aGVuKHVzZXIgPT4ge1xuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIGRvbmUobnVsbCwgZmFsc2UsIHsgbWVzc2FnZTogJ0xvZ2luIGluY29ycmVjdCcgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHVzZXIuYXV0aGVudGljYXRlKHBhc3N3b3JkKVxuICAgICAgICAgICAgLnRoZW4ob2sgPT4ge1xuICAgICAgICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbmUobnVsbCwgZmFsc2UsIHsgbWVzc2FnZTogJ0xvZ2luIGluY29ycmVjdCcgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkb25lKG51bGwsIHVzZXIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZG9uZSlcbiAgICB9KTtcbiAgfVxuKSk7XG5cbnJvdXRlci5wb3N0KCcvc2lnbnVwJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdsb2NhbC1zaWdudXAnLCB7IHN1Y2Nlc3NSZWRpcmVjdDogJy8nfSkpO1xuXG5yb3V0ZXIucG9zdCgnL2xvZ2luJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdsb2NhbC1sb2dpbicsIHtzdWNjZXNzUmVkaXJlY3Q6ICcvJ30pKTtcblxuLy8gdG8gZ2V0IGFsbCB0aGUgcG9sbCB0aGlzIGxvZ2dlZGluIHVzZXIgY3JlYXRlZCwgaW5jbHVkZSBhbGwgdGhlIHBvbGxzJyBhc3NvY2lhdGVkIG9wdGlvbnNcbnJvdXRlci5nZXQoJy9wb2xscycsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBwb2xscy5maW5kQWxsKHtcbiAgICB3aGVyZToge1VzZXJJZDogcmVxLnVzZXIuaWR9LFxuICAgIGluY2x1ZGU6IFt7bW9kZWw6IHBvbGxPcHRpb25zfV1cbiAgfSlcbiAgICAudGhlbihwb2xscyA9PiByZXMuanNvbihwb2xscykpXG4gICAgLmNhdGNoKG5leHQpXG59KVxuXG4vLyB0byBnZXQgYWxsIHRoZSBwb2xsIGNob2ljZXMgdGhpcyBsb2dnZWRpbiB1c2VyIGhhZCB2b3RlZCwgd2UgY2FuIGpvaW4gdGhlIHBvbGxfb3B0aW9uX2RldGFpbFxuLy8gdGFibGUgd2l0aCB1c2VycyB0YWJsZSwgZmlsdGVyIG91dCB0aG9zZSB1c2VyLmlkID09PSByZXEudXNlci5pZFxucm91dGVyLmdldCgnL3ZvdGVkJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIG11c3RCZUxvZ2dlZEluKHJlcSwgcmVzLCBuZXh0KVxuXG4gIHBvbGxfb3B0aW9uX2RldGFpbC5maW5kQWxsKHtcbiAgICBpbmNsdWRlOiBbe21vZGVsOiB1c2VycywgIHdoZXJlOiB7IGlkOiByZXEudXNlci5pZCB9IH1dXG4gIH0pXG4gICAgLnRoZW4odm90ZWQgPT4gcmVzLmpzb24odm90ZWQpKVxuICAgIC5jYXRjaChuZXh0KVxufSlcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbnRyb2xsZXJzL3VzZXJzLmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/*!*********************************!*\
  !*** external "passport-local" ***!
  \*********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"passport-local\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXNzcG9ydC1sb2NhbFwiP2YzZWEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGFzc3BvcnQtbG9jYWxcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJwYXNzcG9ydC1sb2NhbFwiXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///17\n");

/***/ })
/******/ ]);